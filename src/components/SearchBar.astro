---
import Search from "./Search";
const allPosts = await Astro.glob("../content/blog/*.{md,mdx}");
// const posts = allPosts.filter(post => (post.frontmatter.title));

function extractSlug(filePath) {
    const parts = filePath.split("/");
    let filename = parts[parts.length - 1];
    filename = filename.replace(/\.(md|mdx)$/, ""); // 파일 확장자 제거
    return filename;
}
const posts = allPosts.map((post) => ({
    ...post,
    frontmatter: {
        ...post.frontmatter,
        slug: extractSlug(post.file),
    },
}));
---

<Search client:load searchList={posts} />
